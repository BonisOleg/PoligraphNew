---
name: "План: Why-us блоки - зображення як фон, весь блок клікабельний"
overview: ""
todos:
  - id: e9328de6-cd4f-474d-8550-c3e39143db2c
    content: "Протестувати на desktop (Chrome, Firefox, Safari) - всі основні функції працюють: відкриття/закриття, toggle MENU/X, HTMX навігація, Escape"
    status: pending
  - id: 883eca54-9539-4a74-8681-b14ae7891a2c
    content: "Протестовано на mobile: капсула розтягується на 100vw, кнопки горизонтальні, MENU→X працює, Escape закриває"
    status: pending
  - id: 1c661904-ac0d-4996-b75f-3fbeb692f9d2
    content: "Оновити HTML: видалити image-container та кнопки, додати role/tabindex на блоки"
    status: pending
  - id: 0d3d0eb4-7b6f-4443-8501-8b04772d5ab8
    content: "Переписати CSS: фон на .why-us__slide, повна висота, видалити стилі кнопок"
    status: pending
  - id: 3205dda6-a2e1-44c5-8cc9-4a35e930ca27
    content: "Оновити JS: обробка кліку на весь блок замість кнопок"
    status: pending
  - id: 6f889026-1065-40a9-9fc0-0ef7fb27dab0
    content: "Протестувати: desktop hover, tablet tap, mobile scroll, keyboard navigation"
    status: pending
---

# План: Why-us блоки - зображення як фон, весь блок клікабельний

## Поточні проблеми

**Знайдені проблеми:**

- Зображення в окремому контейнері `.why-us__slide-image-container` замість фону блоку
- Блоки стали менші (потрібна повна висота)
- Є окремі кнопки всередині блоків (треба прибрати)
- Блок не клікабельний повністю (тільки кнопка)

## Нова архітектура

**HTML структура:**

- Видалити `<div class="why-us__slide-image-container">` (порожній контейнер)
- Видалити `<button class="why-us__slide-button">` (кнопка всередині)
- Залишити тільки `<article class="why-us__slide">` з контентом всередині
- Додати `role="button"` та `tabindex="0"` на `.why-us__slide` для accessibility

**CSS зміни:**

- `.why-us__slide` має `background-image` замість окремого контейнера
- Повна висота блоку (min-height: 90vh на desktop, 100vh на mobile)
- Контент без overlay - прозорий, текст білий поверх зображення
- `cursor: pointer` на весь блок
- Видалити всі стилі для `.why-us__slide-image-container` та `.why-us__slide-button`

**JavaScript зміни:**

- Замість обробника на кнопку - обробник на весь `.why-us__slide`
- Зберегти логіку переходу на `/about/` з якорем
- Оновити event delegation для кліку на блок

## Файли до зміни

### 1. [`templates/partials/index_content.html`](templates/partials/index_content.html) - lines 31-63

**Видалити:**

- `<div class="why-us__slide-image-container">` (порожній контейнер)
- `<button class="why-us__slide-button">` та весь його вміст

**Змінити:**

- `<article class="why-us__slide">` → додати `role="button"`, `tabindex="0"`, `aria-label`
- Контент (h3 + p) залишається всередині

**Нова структура:**

```html
<article class="why-us__slide" 
         data-slide-index="0"
         role="button"
         tabindex="0"
         aria-label="Дізнатися більше про перевагу 1">
    <div class="why-us__slide-content">
        <h3 class="why-us__slide-title">Перевага 1</h3>
        <p class="why-us__slide-description">Опис переваги 1</p>
    </div>
</article>
```

### 2. [`static/css/components/why-us.css`](static/css/components/why-us.css) - ПОВНА ПЕРЕРОБКА

**Видалити:**

- Всі стилі для `.why-us__slide-image-container` (lines 43-51, 154-156, 222-224, 330-333)
- Всі стилі для `.why-us__slide-button` (lines 99-117, 366-369)
- Всі background-image правила для `.why-us__slide-image-container`

**Створити:**

`.why-us__slide` - фон замість окремого контейнера:

```css
.why-us__slide {
  background-color: #010101;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  border-radius: var(--border-radius);
  overflow: hidden;
  cursor: pointer;
  position: relative; /* Для контенту поверх */
}
```

**Фонові зображення на `.why-us__slide`:**

- Desktop: `background-image` на `.why-us__slide[data-slide-index="0"]` з різними станами (звичайний/згорнутий/розтягнутий)
- Tablet: аналогічно
- Mobile: один фон для кожного слайду

**Розміри:**

- Desktop: `min-height: 90vh` (повна висота)
- Tablet: `min-height: 90vh`
- Mobile: `min-height: 70vh` (як зараз)

**Контент без overlay:**

```css
.why-us__slide-content {
  padding: var(--spacing-lg);
  position: relative;
  z-index: 1; /* Поверх фону */
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center; /* Вертикальне центрування */
}

.why-us__slide-title {
  color: #ffffff; /* Білий текст */
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /* Легка тінь для читабельності */
}

.why-us__slide-description {
  color: rgba(255, 255, 255, 0.9); /* Білий з легкою прозорістю */
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}
```

**Hover ефекти:**

- Desktop: зберігаємо flex hover (70%/15%/15%)
- Tablet: зберігаємо tap to expand
- Mobile: зберігаємо scroll-snap

**Accessibility:**

```css
.why-us__slide:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 4px;
}

.why-us__slide:active {
  transform: scale(0.98); /* Feedback при кліку */
}
```

### 3. [`static/js/why-us.js`](static/js/why-us.js) - ОНОВЛЕННЯ

**Видалити:**

- `setupButtonHandlers()` функцію (обробка кнопок)
- Всі посилання на `.why-us__slide-button`

**Створити:**

`setupSlideClickHandlers()` - обробка кліку на весь блок:

```js
function setupSlideClickHandlers() {
  const slides = document.querySelectorAll('.why-us__slide');
  
  slides.forEach(function(slide) {
    const slideIndex = slide.getAttribute('data-slide-index');
    
    function handleSlideClick(e) {
      e.preventDefault();
      e.stopPropagation();
      
      const targetUrl = '/about/';
      const anchorId = '#service-' + slideIndex;
      
      // HTMX перехід
      if (typeof htmx !== 'undefined') {
        const mainElement = document.getElementById('main');
        if (mainElement) {
          htmx.ajax('GET', targetUrl, {
            target: '#main',
            swap: 'innerHTML',
            pushUrl: targetUrl
          }).then(function() {
            setTimeout(function() {
              const targetElement = document.querySelector(anchorId);
              if (targetElement) {
                targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                // Відкриваємо акордеон якщо є
                if (targetElement.classList.contains('accordion')) {
                  const header = targetElement.querySelector('.accordion__header');
                  if (header) {
                    header.click();
                  }
                }
              }
            }, 300);
          });
        }
      } else {
        window.location.href = targetUrl + anchorId;
      }
    }
    
    // Клік
    slide.addEventListener('click', handleSlideClick);
    
    // Enter/Space для keyboard navigation
    slide.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        handleSlideClick(e);
      }
    });
    
    listeners.push(
      { el: slide, event: 'click', fn: handleSlideClick },
      { el: slide, event: 'keydown', fn: handleSlideClick }
    );
  });
}
```

**Оновити `init()`:**

- Видалити виклик `setupButtonHandlers()`
- Додати виклик `setupSlideClickHandlers()`

**Оновити tablet tap handler:**

- Видалити перевірку `event.target.closest('.why-us__slide-button')`
- Клік на весь блок активує розширення

## Критичні технічні деталі

**Background images:**

- Desktop: 3 стани для кожного слайду (звичайний/згорнутий/розтягнутий)
- `background-size: cover` - зображення покриває весь блок
- `background-position: center` - центрування

**Text readability:**

- `text-shadow` для контрасту тексту на фоні
- Білий колір тексту з легкою прозорістю для опису
- Можна додати `backdrop-filter: blur(1px)` якщо потрібно (але без overlay)

**Accessibility:**

- `role="button"` на `<article>` для screen readers
- `tabindex="0"` для keyboard navigation
- `aria-label` з описом дії
- Enter/Space для активації

**HTMX integration:**

- Зберігаємо логіку переходу на `/about/` з якорем
- Після swap відкриваємо акордеон якщо потрібно

## Послідовність виконання

1. Оновити HTML - видалити image-container та кнопки
2. Переписати CSS - фон на .why-us__slide, видалити стилі кнопок
3. Оновити JS - обробка кліку на весь блок
4. Тестування - desktop hover, tablet tap, mobile scroll

## Очікуваний результат

- ✅ Зображення як фон блоку (не окремий контейнер)
- ✅ Повна висота блоків (90vh desktop, 70vh mobile)
- ✅ Весь блок клікабельний (без окремих кнопок)
- ✅ Контент без overlay (текст білий поверх зображення)
- ✅ Збережено hover ефекти (desktop/tablet/mobile)
- ✅ Accessibility (keyboard navigation, screen readers)
- ✅ HTMX навігація працює
- ✅ BEM методологія, без !important